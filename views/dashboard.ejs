<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Page Title</title>
    <link href="dashboardStyles.css" rel="stylesheet">
</head>
<body>
<table class="table">
  <thead>
    <tr>
      <th scope="col">Sport</th>
      <th scope="col">League</th>
      <th scope="col">Home (Source)</th>
      <th scope="col">Away (Source)</th>
      <th scope="col">Date & Time</th>
    </tr>
  </thead>
  <tbody>
    <% 
      const seenTeams = new Set(); 
      advantages.forEach(advantage => {
        const homeName = advantage.outcomes[0].participant.name;
        const awayName = advantage.outcomes[1].participant.name;
        
        if (seenTeams.has(homeName) && seenTeams.has(awayName)) {
          return;
        }

        seenTeams.add(homeName);
        seenTeams.add(awayName);
    %>
    <tr>
      <td><%= advantage.market.event.participants[0].sport %></td>
      <td><%= advantage.market.event.competitionInstance.name %></td>
      <td>
        <a href="#" onclick='openDetailsModal({
          name: "<%= homeName %>",
          modifier: "<%= advantage.outcomes[0].modifier %>",
          payout: "<%= advantage.outcomes[0].payout %>",
          source: "<%= advantage.outcomes[0].source %>"
        })'><%= homeName %></a>
        (<span><%= advantage.outcomes[0].source %></span>)
      </td>
      <td>
        <a href="#" onclick='openDetailsModal({
          name: "<%= awayName %>",
          modifier: "<%= advantage.outcomes[1].modifier %>",
          payout: "<%= advantage.outcomes[1].payout %>",
          source: "<%= advantage.outcomes[1].source %>"
        })'><%= awayName %></a>
        (<span><%= advantage.outcomes[1].source %></span>)
      </td>
      <td><%= advantage.market.event.startTime %></td>
    </tr>
    <% }) %>
  </tbody>
</table>

<!-- Modal -->
<div id="detailsModal" class="detailsModal" style="display: none;">


  <div class="detailsModal-content">
    <div class="modal-heading">
      <h2>Participant Details</h2>
      <a href="#" onclick="closeDetailsModal(event)">Back to List</a>
    </div>
    <p><span class="label">Name:</span> <span id="detailsName"></span></p>
    <p><span class="label">Modifier:</span> <span id="detailsModifier"></span></p>
    <p><span class="label">Payout:</span> <span id="detailsPayout"></span></p>
    <p><span class="label">Source:</span> <span id="detailsSource"></span></p>
  </div>
</div>




<script>
  // Open modal and inject data
  function openDetailsModal(data) {
    document.getElementById('detailsName').textContent = data.name || 'N/A';
    document.getElementById('detailsModifier').textContent = data.modifier || 'N/A';
    document.getElementById('detailsPayout').textContent = data.payout || 'N/A';
    document.getElementById('detailsSource').textContent = data.source || 'N/A';

    document.getElementById('detailsModal').style.display = 'flex'; // or 'block' depending on your CSS
  }

  // Close modal
  function closeDetailsModal(event) {
    event.preventDefault();
    document.getElementById('detailsModal').style.display = 'none';
  }
</script>


</body>
</html>